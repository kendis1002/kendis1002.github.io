---
title: 'TÃ­nh nÄƒng má»›i trong phiÃªn báº£n v1'
date: 2021-08-07T15:32:14Z
lastmod: '2021-02-01'
tags: ['next-js', 'tailwind', 'guide']
draft: false
summary: 'Tá»•ng quan vá» cÃ¡c tÃ­nh nÄƒng má»›i Ä‘Æ°á»£c phÃ¡t hÃ nh trong v1 - sao chÃ©p khá»‘i mÃ£, nhiá»u tÃ¡c giáº£, bá»‘ cá»¥c frontmatter vÃ  nhiá»u hÆ¡n ná»¯a'
layout: PostSimple
bibliography: references-data.bib
---

## Tá»•ng quan

Má»™t bÃ i viáº¿t vá» cÃ¡c tÃ­nh nÄƒng má»›i Ä‘Æ°á»£c giá»›i thiá»‡u trong v1.0. CÃ¡c tÃ­nh nÄƒng má»›i:

<TOCInline toc={props.toc} exclude="Overview" toHeading={2} />

KÃ­ch thÆ°á»›c JS táº£i láº§n Ä‘áº§u giáº£m tá»« 43kB xuá»‘ng 39kB máº·c dÃ¹ Ä‘Ã£ thÃªm táº¥t cáº£ cÃ¡c tÃ­nh nÄƒng má»›i! [^1]

[^1]: Vá»›i nhá»¯ng thay Ä‘á»•i má»›i trong Nextjs 12, kÃ­ch thÆ°á»›c JS táº£i láº§n Ä‘áº§u tÄƒng lÃªn 45kB.

Xem [hÆ°á»›ng dáº«n nÃ¢ng cáº¥p](#upgrade-guide) bÃªn dÆ°á»›i náº¿u báº¡n Ä‘ang chuyá»ƒn tá»« phiÃªn báº£n v0 cá»§a máº«u.

## MÃ u sáº¯c chá»§ Ä‘á»

Báº¡n cÃ³ thá»ƒ dá»… dÃ ng sá»­a Ä‘á»•i mÃ u chá»§ Ä‘á» báº±ng cÃ¡ch thay Ä‘á»•i thuá»™c tÃ­nh primary trong tá»‡p cáº¥u hÃ¬nh tailwind:

```js:tailwind.config.js
theme: {
    colors: {
      primary: colors.teal,
      gray: colors.neutral,
      ...
    }
  ...
}
```

Thuá»™c tÃ­nh mÃ u primary nÃªn Ä‘Æ°á»£c gÃ¡n má»™t Ä‘á»‘i tÆ°á»£ng vá»›i cÃ¡c khÃ³a tá»« 50, 100, 200 ... 900 vÃ  cÃ¡c giÃ¡ trá»‹ mÃ£ mÃ u tÆ°Æ¡ng á»©ng.

Tailwind bao gá»“m cÃ¡c báº£ng mÃ u máº·c Ä‘á»‹nh tuyá»‡t vá»i cÃ³ thá»ƒ Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ tÃ¹y chá»‰nh trang web cá»§a báº¡n. Kiá»ƒm tra [trang tÃ i liá»‡u tÃ¹y chá»‰nh mÃ u sáº¯c](https://tailwindcss.com/docs/customizing-colors) Ä‘á»ƒ xem Ä‘áº§y Ä‘á»§ cÃ¡c tÃ¹y chá»n.

Äang chuyá»ƒn tá»« v1? Báº¡n cÃ³ thá»ƒ quay láº¡i chá»§ Ä‘á» trÆ°á»›c Ä‘Ã³ báº±ng cÃ¡ch Ä‘áº·t `primary` thÃ nh `colors.sky` (Tailwind 2.2.2 trá»Ÿ lÃªn, náº¿u khÃ´ng thÃ¬ `colors.lightBlue`) vÃ  thay Ä‘á»•i gray thÃ nh `colors.gray`.

Tá»« v1.1.2 trá»Ÿ lÃªn, báº¡n cÅ©ng cÃ³ thá»ƒ dá»… dÃ ng tÃ¹y chá»‰nh kiá»ƒu cá»§a cÃ¡c khá»‘i mÃ£ báº±ng cÃ¡ch sá»­a Ä‘á»•i báº£ng Ä‘á»‹nh kiá»ƒu `css/prism.css`. TÃªn lá»›p token tÆ°Æ¡ng thÃ­ch vá»›i prismjs
nÃªn báº¡n cÃ³ thá»ƒ sao chÃ©p vÃ  Ä‘iá»u chá»‰nh kiá»ƒu token tá»« báº£ng Ä‘á»‹nh kiá»ƒu prismjs, vÃ­ dá»¥: [chá»§ Ä‘á» prism](https://github.com/PrismJS/prism-themes).

## TrÃ¬nh biÃªn dá»‹ch MDX Xdm

ChÃºng tÃ´i Ä‘Ã£ chuyá»ƒn bá»™ Ä‘Ã³ng gÃ³i MDX tá»« [next-mdx-remote](https://github.com/hashicorp/next-mdx-remote) sang [mdx-bundler](https://github.com/kentcdodds/mdx-bundler).
Äiá»u nÃ y sá»­ dá»¥ng [xdm](https://github.com/wooorm/xdm) bÃªn dÆ°á»›i, micromark 3 má»›i nháº¥t vÃ  cÃ¡c thÆ° viá»‡n remark, rehype.

**Cáº£nh bÃ¡o:** Náº¿u báº¡n Ä‘ang sá»­ dá»¥ng cÃ¡c thÆ° viá»‡n remark hoáº·c rehype tÃ¹y chá»‰nh, vui lÃ²ng nÃ¢ng cáº¥p lÃªn cÃ¡c phiÃªn báº£n tÆ°Æ¡ng thÃ­ch vá»›i micromark 3. Náº¿u báº¡n Ä‘ang nÃ¢ng cáº¥p, vui lÃ²ng xÃ³a `node_modules` vÃ  `package-lock.json` Ä‘á»ƒ trÃ¡nh cÃ¡c váº¥n Ä‘á» liÃªn quan Ä‘áº¿n phá»¥ thuá»™c cÅ©.

[xdm](https://github.com/wooorm/xdm) chá»©a nhiá»u cáº£i tiáº¿n so vá»›i [@mdx-js/mdx](https://github.com/mdx-js/mdx), trÃ¬nh biÃªn dá»‹ch Ä‘Æ°á»£c sá»­ dá»¥ng ná»™i bá»™ bá»Ÿi next-mdx-remote, nhÆ°ng cÃ³ thá»ƒ cÃ³ má»™t sá»‘ thay Ä‘á»•i hÃ nh vi gÃ¢y ra lá»—i.
Vui lÃ²ng kiá»ƒm tra Ä‘áº§u ra markdown cá»§a báº¡n Ä‘á»ƒ xÃ¡c minh.

Má»™t sá»‘ kháº£ nÄƒng má»›i bao gá»“m táº£i cÃ¡c thÃ nh pháº§n trá»±c tiáº¿p trong tá»‡p mdx báº±ng cÃº phÃ¡p import vÃ  bao gá»“m mÃ£ js cÃ³ thá»ƒ Ä‘Æ°á»£c biÃªn dá»‹ch vÃ  Ä‘Ã³ng gÃ³i á»Ÿ bÆ°á»›c build.

VÃ­ dá»¥, Ä‘oáº¡n jsx sau cÃ³ thá»ƒ Ä‘Æ°á»£c sá»­ dá»¥ng trá»±c tiáº¿p trong tá»‡p MDX Ä‘á»ƒ hiá»ƒn thá»‹ thÃ nh pháº§n tiÃªu Ä‘á» trang:

```jsx
// Hoáº·c import PageTitle from './components/PageTitle.js' náº¿u báº¡n Ä‘ang sá»­ dá»¥ng js
import PageTitle from './components/PageTitle.tsx'
;<PageTitle> Sá»­ dá»¥ng cÃ¡c thÃ nh pháº§n JSX trong MDX </PageTitle>
```

Cáº¥u hÃ¬nh máº·c Ä‘á»‹nh giáº£i quyáº¿t táº¥t cáº£ cÃ¡c thÃ nh pháº§n tÆ°Æ¡ng Ä‘á»‘i vá»›i thÆ° má»¥c `components`.

**LÆ°u Ã½**:
CÃ¡c thÃ nh pháº§n yÃªu cáº§u bá»™ táº£i hÃ¬nh áº£nh bÃªn ngoÃ i cÅ©ng yÃªu cáº§u cáº¥u hÃ¬nh esbuild bá»• sung.
CÃ¡c thÃ nh pháº§n phá»¥ thuá»™c vÃ o tráº¡ng thÃ¡i á»©ng dá»¥ng toÃ n cá»¥c trong vÃ²ng Ä‘á»i nhÆ° thÃ nh pháº§n `Link` cá»§a Nextjs cÅ©ng sáº½ khÃ´ng hoáº¡t Ä‘á»™ng vá»›i thiáº¿t láº­p nÃ y vÃ¬ má»—i tá»‡p mdx Ä‘Æ°á»£c xÃ¢y dá»±ng Ä‘á»™c láº­p.
Äá»‘i vá»›i cÃ¡c trÆ°á»ng há»£p nhÆ° váº­y, tá»‘t hÆ¡n lÃ  sá»­ dá»¥ng thay tháº¿ thÃ nh pháº§n.

## ThÃ nh pháº§n má»¥c lá»¥c

Láº¥y cáº£m há»©ng tá»« [Docusaurus](https://docusaurus.io/docs/next/markdown-features/inline-toc) vÃ  [gatsby-remark-table-of-contents](https://www.gatsbyjs.com/plugins/gatsby-remark-table-of-contents/) cá»§a Gatsby,
biáº¿n `toc` chá»©a táº¥t cáº£ cÃ¡c tiÃªu Ä‘á» cáº¥p cao nháº¥t cá»§a tÃ i liá»‡u Ä‘Æ°á»£c truyá»n vÃ o tá»‡p MDX vÃ  cÃ³ thá»ƒ Ä‘Æ°á»£c Ä‘á»‹nh kiá»ƒu tÆ°Æ¡ng á»©ng.
Äá»ƒ táº¡o má»¥c lá»¥c (TOC) Ä‘Æ¡n giáº£n, báº¡n cÃ³ thá»ƒ sá»­ dá»¥ng thÃ nh pháº§n `TOCInline` hiá»‡n cÃ³.

VÃ­ dá»¥, TOC trong bÃ i viáº¿t nÃ y Ä‘Æ°á»£c táº¡o báº±ng mÃ£ sau:

```jsx
<TOCInline toc={props.toc} exclude="Overview" toHeading={2} />
```

Báº¡n cÃ³ thá»ƒ tÃ¹y chá»‰nh cÃ¡c tiÃªu Ä‘á» Ä‘Æ°á»£c hiá»ƒn thá»‹ báº±ng cÃ¡ch cáº¥u hÃ¬nh cÃ¡c thuá»™c tÃ­nh `fromHeading` vÃ  `toHeading`, hoáº·c loáº¡i trá»« cÃ¡c tiÃªu Ä‘á» cá»¥ thá»ƒ
báº±ng cÃ¡ch truyá»n má»™t chuá»—i hoáº·c má»™t máº£ng chuá»—i vÃ o thuá»™c tÃ­nh `exclude`. Theo máº·c Ä‘á»‹nh, táº¥t cáº£ cÃ¡c tiÃªu Ä‘á» cÃ³ Ä‘á»™ sÃ¢u 3 hoáº·c nhá» hÆ¡n Ä‘Æ°á»£c thá»¥t lá». Äiá»u nÃ y cÃ³ thá»ƒ Ä‘Æ°á»£c cáº¥u hÃ¬nh báº±ng cÃ¡ch thay Ä‘á»•i thuá»™c tÃ­nh `indentDepth`.
Thuá»™c tÃ­nh `asDisclosure` cÃ³ thá»ƒ Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ hiá»ƒn thá»‹ TOC trong má»™t pháº§n tá»­ disclosure cÃ³ thá»ƒ má»Ÿ rá»™ng.

ÄÃ¢y lÃ  TOC Ä‘áº§y Ä‘á»§ Ä‘Æ°á»£c hiá»ƒn thá»‹ trong má»™t pháº§n tá»­ disclosure.

```jsx
<TOCInline toc={props.toc} asDisclosure />
```

<TOCInline toc={props.toc} asDisclosure />

## Bá»‘ cá»¥c

Báº¡n cÃ³ thá»ƒ Ã¡nh xáº¡ ná»™i dung blog mdx vÃ o cÃ¡c thÃ nh pháº§n bá»‘ cá»¥c báº±ng cÃ¡ch cáº¥u hÃ¬nh trÆ°á»ng frontmatter. VÃ­ dá»¥, bÃ i viáº¿t nÃ y Ä‘Æ°á»£c viáº¿t vá»›i bá»‘ cá»¥c `PostSimple` má»›i!

### ThÃªm máº«u má»›i

CÃ¡c máº«u bá»‘ cá»¥c Ä‘Æ°á»£c lÆ°u trá»¯ trong thÆ° má»¥c `./layouts`. Báº¡n cÃ³ thá»ƒ thÃªm cÃ¡c thÃ nh pháº§n React mÃ  báº¡n muá»‘n Ã¡nh xáº¡ vÃ o ná»™i dung markdown trong thÆ° má»¥c nÃ y.
TÃªn tá»‡p thÃ nh pháº§n pháº£i khá»›p vá»›i tÃªn Ä‘Æ°á»£c chá»‰ Ä‘á»‹nh trong trÆ°á»ng `layout` cá»§a frontmatter markdown.

TrÆ°á»ng báº¯t buá»™c duy nháº¥t lÃ  `children` chá»©a ná»™i dung MDX Ä‘Ã£ Ä‘Æ°á»£c hiá»ƒn thá»‹, máº·c dÃ¹ báº¡n cÃ³ thá»ƒ muá»‘n truyá»n vÃ o ná»™i dung frontMatter vÃ  hiá»ƒn thá»‹ nÃ³ trong máº«u.

Báº¡n cÃ³ thá»ƒ cáº¥u hÃ¬nh máº«u Ä‘á»ƒ nháº­n cÃ¡c trÆ°á»ng khÃ¡c - xem thÃ nh pháº§n `PostLayout` Ä‘á»ƒ biáº¿t vÃ­ dá»¥.

ÄÃ¢y lÃ  má»™t vÃ­ dá»¥ vá» bá»‘ cá»¥c mÃ  báº¡n cÃ³ thá»ƒ tÃ¹y chá»‰nh thÃªm:

```jsx
export default function ExampleLayout({ frontMatter, children }) {
  const { date, title } = frontMatter

  return (
    <SectionContainer>
      <div>{date}</div>
      <h1>{title}</h1>
      <div>{children}</div>
    </SectionContainer>
  )
}
```

### Cáº¥u hÃ¬nh frontmatter cá»§a bÃ i viáº¿t blog

Sá»­ dá»¥ng trÆ°á»ng frontmatter `layout` Ä‘á»ƒ chá»‰ Ä‘á»‹nh máº«u báº¡n muá»‘n Ã¡nh xáº¡ bÃ i viáº¿t markdown vÃ o. ÄÃ¢y lÃ  cÃ¡ch frontmatter cá»§a bÃ i viáº¿t nÃ y trÃ´ng nhÆ° tháº¿ nÃ o:

```
---
title: 'TÃ­nh nÄƒng má»›i trong phiÃªn báº£n v1'
date: '2021-05-26   '
tags: ['next-js', 'tailwind', 'guide']
draft: false
summary: 'Giá»›i thiá»‡u cÃ¡c tÃ­nh nÄƒng bá»‘ cá»¥c má»›i - báº¡n cÃ³ thá»ƒ Ã¡nh xáº¡ ná»™i dung blog mdx vÃ o cÃ¡c thÃ nh pháº§n bá»‘ cá»¥c báº±ng cÃ¡ch cáº¥u hÃ¬nh trÆ°á»ng frontmatter'
layout: PostSimple
---
```

Báº¡n cÃ³ thá»ƒ cáº¥u hÃ¬nh bá»‘ cá»¥c máº·c Ä‘á»‹nh trong pháº§n trang tÆ°Æ¡ng á»©ng báº±ng cÃ¡ch sá»­a Ä‘á»•i biáº¿n `DEFAULT_LAYOUT`.
`DEFAULT_LAYOUT` cho trang bÃ i viáº¿t blog Ä‘Æ°á»£c Ä‘áº·t thÃ nh `PostLayout`.

### Má»Ÿ rá»™ng

`layout` Ä‘Æ°á»£c Ã¡nh xáº¡ Ä‘áº¿n wrapper bao bá»c toÃ n bá»™ ná»™i dung MDX.

```jsx
export const MDXComponents = {
  Image,
  a: CustomLink,
  pre: Pre,
  wrapper: ({ components, layout, ...rest }) => {
    const Layout = require(`../layouts/${layout}`).default
    return <Layout {...rest} />
  },
}

export const MDXLayoutRenderer = ({ layout, mdxSource, ...rest }) => {
  const MDXLayout = useMemo(() => getMDXComponent(mdxSource), [mdxSource])

  return <MDXLayout layout={layout} components={MDXComponents} {...rest} />
}
```

Sá»­ dá»¥ng thÃ nh pháº§n `MDXLayoutRenderer` trÃªn má»™t trang nÆ¡i báº¡n muá»‘n cháº¥p nháº­n tÃªn bá»‘ cá»¥c Ä‘á»ƒ Ã¡nh xáº¡ vÃ o bá»‘ cá»¥c mong muá»‘n.
Báº¡n cáº§n truyá»n tÃªn bá»‘ cá»¥c tá»« thÆ° má»¥c layout (nÃ³ pháº£i khá»›p chÃ­nh xÃ¡c).

## PhÃ¢n tÃ­ch

Máº«u hiá»‡n há»— trá»£ [plausible](https://plausible.io/), [simple analytics](https://simpleanalytics.com/) vÃ  google analytics.
Cáº¥u hÃ¬nh `siteMetadata.js` vá»›i cÃ¡c cÃ i Ä‘áº·t tÆ°Æ¡ng á»©ng vá»›i nhÃ  cung cáº¥p phÃ¢n tÃ­ch mong muá»‘n.

```js
analytics: {
    // há»— trá»£ plausible, simpleAnalytics hoáº·c googleAnalytics
    plausibleDataDomain: '', // vÃ­ dá»¥: tailwind-nextjs-starter-blog.vercel.app
    simpleAnalytics: false, // true hoáº·c false
    googleAnalyticsId: '', // vÃ­ dá»¥: UA-000000-2 hoáº·c G-XXXXXXX
  },
```

CÃ¡c sá»± kiá»‡n tÃ¹y chá»‰nh cÅ©ng Ä‘Æ°á»£c há»— trá»£. Báº¡n cÃ³ thá»ƒ nháº­p hÃ m `logEvent` tá»« tá»‡p `@components/analytics/[ANALYTICS-PROVIDER]` vÃ  gá»i nÃ³ khi
kÃ­ch hoáº¡t cÃ¡c sá»± kiá»‡n quan tÃ¢m. _LÆ°u Ã½_: CÃ³ thá»ƒ cáº§n cáº¥u hÃ¬nh bá»• sung tÃ¹y thuá»™c vÃ o nhÃ  cung cáº¥p phÃ¢n tÃ­ch, vui lÃ²ng kiá»ƒm tra tÃ i liá»‡u chÃ­nh thá»©c
cá»§a há» Ä‘á»ƒ biáº¿t thÃªm thÃ´ng tin.

## Há»‡ thá»‘ng bÃ¬nh luáº­n blog

ChÃºng tÃ´i cÅ©ng Ä‘Ã£ thÃªm há»— trá»£ cho [giscus](https://github.com/laymonage/giscus), [utterances](https://github.com/utterance/utterances) hoáº·c disqus.
Äá»ƒ kÃ­ch hoáº¡t, chá»‰ cáº§n cáº¥u hÃ¬nh thuá»™c tÃ­nh comments cá»§a `siteMetadata.js` vá»›i nhÃ  cung cáº¥p mong muá»‘n vÃ  cÃ¡c cÃ i Ä‘áº·t nhÆ° Ä‘Æ°á»£c chá»‰ Ä‘á»‹nh trong tá»‡p cáº¥u hÃ¬nh.

```js
comment: {
    // Chá»n má»™t nhÃ  cung cáº¥p vÃ  sá»­ dá»¥ng cÃ¡c biáº¿n mÃ´i trÆ°á»ng liÃªn quan Ä‘áº¿n nÃ³
    // https://vercel.com/docs/environment-variables
    provider: 'giscus', // cÃ¡c nhÃ  cung cáº¥p Ä‘Æ°á»£c há»— trá»£: giscus, utterances, disqus
    giscusConfig: {
      // Truy cáº­p liÃªn káº¿t bÃªn dÆ°á»›i vÃ  lÃ m theo cÃ¡c bÆ°á»›c trong pháº§n 'cáº¥u hÃ¬nh'
      // https://giscus.app/
      repo: process.env.NEXT_PUBLIC_GISCUS_REPO,
      repositoryId: process.env.NEXT_PUBLIC_GISCUS_REPOSITORY_ID,
      category: process.env.NEXT_PUBLIC_GISCUS_CATEGORY,
      categoryId: process.env.NEXT_PUBLIC_GISCUS_CATEGORY_ID,
      mapping: 'pathname', // supported options: pathname, url, title
      reactions: '1', // Emoji reactions: 1 = enable / 0 = disable
      // Send discussion metadata periodically to the parent window: 1 = enable / 0 = disable
      metadata: '0',
      // theme example: light, dark, dark_dimmed, dark_high_contrast
      // transparent_dark, preferred_color_scheme, custom
      theme: 'light',
      // theme when dark mode
      darkTheme: 'transparent_dark',
      // If the theme option above is set to 'custom`
      // please provide a link below to your custom theme css file.
      // example: https://giscus.app/themes/custom_example.css
      themeURL: '',
    },
    utterancesConfig: {
      // Visit the link below, and follow the steps in the 'configuration' section
      // https://utteranc.es/
      repo: process.env.NEXT_PUBLIC_UTTERANCES_REPO,
      issueTerm: '', // supported options: pathname, url, title
      label: '', // label (optional): Comment ğŸ’¬
      // theme example: github-light, github-dark, preferred-color-scheme
      // github-dark-orange, icy-dark, dark-blue, photon-dark, boxy-light
      theme: '',
      // theme when dark mode
      darkTheme: '',
    },
    disqus: {
      // https://help.disqus.com/en/articles/1717111-what-s-a-shortname
      shortname: process.env.NEXT_PUBLIC_DISQUS_SHORTNAME,
    },
  },
```

## Multiple authors

Information on authors is now split from `siteMetadata.js` and stored in its own `data/authors` folder as a markdown file. Minimally, you will need to have a `default.md` file with authorship information. You can create additional files as required and the file name will be used as the reference to the author.

Here's how an author markdown file might look like:

```md:default.md
---
name: Tails Azimuth
avatar: /static/images/avatar.png
occupation: Professor of Atmospheric Science
company: Stanford University
email: address@yoursite.com
twitter: https://twitter.com/Twitter
linkedin: https://www.linkedin.com
github: https://github.com
---

A long description of yourself...
```

You can use this information in multiple places across the template. For example in the about section of the page, we grab the default author information with this line of code:

```js
const authorDetails = await getFileBySlug('authors', ['default'])
```

This is rendered in the `AuthorLayout` template.

### Multiple authors in blog post

The frontmatter of a blog post accepts an optional `authors` array field. If no field is specified, it is assumed that the default author is used. Simply pass in an array of authors to render multiple authors associated with a post.

For example, the following frontmatter will display the authors given by `data/authors/default.md` and `data/authors/sparrowhawk.md`

```yaml
title: 'My first post'
date: '2021-01-12'
draft: false
summary: 'My first post'
authors: ['default', 'sparrowhawk']
```

A demo of a multiple authors post is shown in [Introducing Tailwind Nextjs Starter Blog post](/blog/introducing-tailwind-nextjs-starter-blog).

## Copy button for code blocks

Hover over a code block and you will notice a GitHub-inspired copy button! You can modify `./components/Pre.js` to further customise it.
The component is passed to `MDXComponents` and modifies all `<pre>` blocks.

## Line highlighting and line numbers

Line highlighting and line numbers are now supported out of the box thanks to the new [rehype-prism-plus plugin](https://github.com/timlrx/rehype-prism-plus)

The following javascript code block:

```
```js {1, 3-4} showLineNumbers
var num1, num2, sum
num1 = prompt('Enter first number')
num2 = prompt('Enter second number')
sum = parseInt(num1) + parseInt(num2) // "+" means "add"
alert('Sum = ' + sum) // "+" means combine into a string
```
```

will appear as:

```js {1,3-4} showLineNumbers
var num1, num2, sum
num1 = prompt('Enter first number')
num2 = prompt('Enter second number')
sum = parseInt(num1) + parseInt(num2) // "+" means "add"
alert('Sum = ' + sum) // "+" means combine into a string
```

To modify the styles, change the following class selectors in the `prism.css` file:

```css
.code-highlight {
  @apply float-left min-w-full;
}

.code-line {
  @apply -mx-4 block border-l-4 border-opacity-0 pl-4 pr-4;
}

.code-line.inserted {
  @apply bg-green-500 bg-opacity-20;
}

.code-line.deleted {
  @apply bg-red-500 bg-opacity-20;
}

.highlight-line {
  @apply -mx-4 border-l-4 border-primary-500 bg-gray-700 bg-opacity-50;
}

.line-number::before {
  @apply -ml-2 mr-4 inline-block w-4 text-right text-gray-400;
  content: attr(line);
}
```

## Newletter component (v1.1.3)

Introduced in v1.1.3, the newsletter component gives you an easy way to build an audience. It integrates with the following providers:

- [Mailchimp](https://mailchimp.com/)
- [Buttondown](https://buttondown.email/)
- [Convertkit](https://convertkit.com/)

To use it, specify the provider which you are using in the config file and add the necessary environment variables to the `.env` file.
For more information on the required variables, check out `.env.sample.`

Two components are exported, a default `NewsletterForm` and a `BlogNewsletterForm` component, which is also passed in as an MDX component
and can be used in a blog post:

```jsx
<BlogNewsletterForm title="Like what you are reading?" />
```

<BlogNewsletterForm title="Like what you are reading?" />

The component relies on nextjs's [API routes](https://nextjs.org/docs/api-routes/introduction) which requires a server-side instance of nextjs to be setup
and is not compatible with a 100% static site export. Users should either self-host or use a compatible platform like Vercel or Netlify which supports this functionality.

A static site compatible alternative is to substitute the route in the newsletter component with a form API endpoint provider.

## Bibliography and Citations (v1.2.1)

`rehype-citation` plugin is added to the xdm processing pipeline in v1.2.1. This allows you to easily format citations and insert bibliography from an existing bibtex or CSL-json file.

For example, the following markdown code sample:

```md
Standard citation [@Nash1950]
In-text citations e.g. @Nash1951
Multiple citations [see @Nash1950; @Nash1951, page 50]

**References:**

[^ref]
```

is rendered to the following:

Standard citation [@Nash1950]  
In-text citations e.g. @Nash1951  
Multiple citations [see @Nash1950; @Nash1951, page 50]

**References:**

[^ref]

A bibliography will be inserted at the end of the document, but this can be overwritten by specifying a `[^Ref]` tag at the intended location.
The plugin uses APA citation formation, but also supports the following CSLs, 'apa', 'vancouver', 'harvard1', 'chicago', 'mla', or a path to a user-specified CSL file.

See [rehype-citation readme](https://github.com/timlrx/rehype-citation) for more information on the configuration options.

## Self-hosted font (v1.5.0)

Google font has been replaced with self-hosted font from [Fontsource](https://fontsource.org/). This gives the following [advantages](https://fontsource.org/docs/introduction):

> Self-hosting brings significant performance gains as loading fonts from hosted services, such as Google Fonts, lead to an extra (render blocking) network request. To provide perspective, for simple websites it has been seen to double visual load times.
>
> Fonts remain version locked. Google often pushes updates to their fonts without notice, which may interfere with your live production projects. Manage your fonts like any other NPM dependency.
>
> Commit to privacy. Google does track the usage of their fonts and for those who are extremely privacy concerned, self-hosting is an alternative.

This leads to a smaller font bundle and a 0.1s faster load time ([webpagetest comparison](https://www.webpagetest.org/video/compare.php?tests=220201_AiDcFH_f68a69b758454dd52d8e67493fdef7da,220201_BiDcMC_bf2d53f14483814ba61e794311dfa771)).

To change the default Inter font:

1. Install the preferred [font](https://fontsource.org/fonts) - `npm install -save @fontsource/<font-name>`
2. Update the import at `pages/_app.js`- `import '@fontsource/<font-name>.css'`
3. Update the `fontfamily` property in the tailwind css config file

## Upgrade guide

There are significant portions of the code that has been changed from v0 to v1 including support for layouts and a new mdx engine.

There's also no real reason to change if the previous one serves your needs and it might be easier to copy
the component changes you are interested in to your existing blog rather than migrating everything over.

Nonetheless, if you want to do so and have not changed much of the template, you could clone the new version and copy over the blog post over to the new template.

Another alternative would be to pull the latest template version with the following code:

```bash
git remote add template git@github.com:timlrx/tailwind-nextjs-starter-blog.git
git pull template v1 --allow-unrelated-histories
rm -rf node_modules
```

You can see an example of such a migration in this [commit](https://github.com/timlrx/timlrx.com/commit/bba1c185384fd6d5cdaac15abf802fdcff027286) for my personal blog.

v1 also uses `feed.xml` rather than `index.xml`, to avoid some build issues with Vercel. If you are migrating you should add a redirect to `next.config.js` like so:

```js
async redirects() {
  return [
    {
      source: '/:path/index.xml',
      destination: '/:path/feed.xml',
      permanent: true,
    }
  ]
}
```
